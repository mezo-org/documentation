---
title: Concepts
---

Before you [Borrow and Mint MUSD](./mint-musd.md), understand the core concepts for how the MUSD stablecoin works.

## Borrow limits

The calculation for the borrowing limit uses the following equation:

$$
\begin{split} \text{Maximum debt} = \text{Min} ( & \text{Amount that puts system into recovery mode}, \\ &  \text{Amount that puts user below MCR}, \\ & \text{Amount that puts user over max borrow amount}) \end{split}
$$

This system prevents risky levels of debts at the trove level and the system-wide level. To prevent risk from individual troves, individual deposts can be liquidated when the individual collateralization ratio (ICR) is less than the minimum collateralization ratio (MCR) as described in the MUSD borrow mechanics.

The system enters recovery mode if following condition is met:

$$
\frac{\text{total collateral}}{\text{total debt}} \leq \text{CCR} = 1.5
$$

If system is in the recovery mode, system operates similarly to normal operation with some additional restrictions:

* Users cannot open new troves that have ICR under the Critical Collateral Ratio (CCR).
* Users cannot adjust existing troves if it causes their ICR to fall under the CCR.
* Refinancing is blocked.

Users can borrow MUSD against provided BTC collateral only if the following equation is satisfied:

$$
\frac{\text{amount of deposited BTC} \times \text{BTC price}}{\text{amount of borrowed MUSD}} \geq \text{MCR} = 1.1
$$

This condition prevents users from borrowing more MUSD than is required by the minimum collateralization ratio. Consider the following example:

- The BTC price is 100k USD.
- A user deposits 0.03 BTC as collateral.
- The user will be able to borrow only up to 2727 MUSD ($0.03 * 100000 / 1.1$).

The user's final maximum borrow amount is calculated using the following equation:

$$$
\text{Max borrow amount at trove open} = \frac{\text{amount of deposited BTC} \times \text{BTC price}}{1.1} 
$$$

## Fees structure

When a user borrows MUSD and provides BTC as collateral, the following fees are charged:

* Gas compensation fees per trove: 200 MUSD
* Origination fee for every new borrow and borrow increase: 0.5% of the borrowed amount (principal)

Consider an example where a user wants to borrow 4000 MUSD.

- Their original borrow amount is 4000 MUSD.
- Gas compensation is 200 MUSD.
- The origination fee is $0.5\% * 4000 MUSD =20 MUSD$

The principal amount is:

$$
4000 MUSD + 200 MUSD + 20 MUSD = 4220 MUSD
$$

The 4220 MUSD accrues interest.

## Interest rates

When you borrow MUSD, you accrue interest on the amount that you borrow. Interest rates on troves are set when a trove is opened. The global interest rate is separate, and does not change the interest rate on existing troves.

- **Global interest rate:** Set by governance
- **Trove interest rate:** A snapshot of the global interest rate value at the moment when the trove is created

To understand how this works, consider the following example:

1. Governance sets global interest rate at 3%
1. Alice opens trove, so the Alice's new trove has an interest rate of 3%
1. Governance sets the global interest rate to 6%.
1. Bob opens a trove, so Bob’s new trove has an interest rate of 6%.

In this scenario, the interest rate on Alice's trove remains at 3% and Bob's trove remains at 6%.

Additionally, borrowing MUSD after global interests have changed does not change the rate for the trove. Consider the following example:

1. Governance sets global interest rate at 3%.
1. Alice opens a trove, so Alice’s new trove has an interest rate of 3%.
1. Governance sets global interest rate at 6%.
1. Alice borrows MUSD.

In this scenario, Alice’s trove maintains an interest rate of 3%. However, the collateralization ratio is calculated based on increased principal now that the interest rate is higher.

To prevent changes in the global interest rate from being unfavorable for users, [refinancing](#refinancing) is available.

## Refinancing

In the example 1 from MUSD / borrow mechanics, the changes of interests have been beneficial for Alice. But if governance would set up at T3 the global interest rate at amount lower than 3%, Alice would be now paying higher interests than users who just opened their troves. To mitigate that we are allowing for refinancing, which updates the Alice’s trove interest rate based on the current global interest rate. When refinancing we’re also updating the the user’s principal:

$$
\text{new principal} = \text{old principal} + \text{old interests} + \text{refinancing origination fee}
$$

The refinancing origination fee is a fraction of the regular origination fee. Both of these fees are set by governance.

## Liquidations

Preventing bad debt on individual trove level is done by liquidating deposits for which

`ICR (Individual's Collateralization Ratio) < MCR (Minimum Collateralization Ratio)`

Liquidation needs to be initiated by someone, we are rewarding that caller with 0.5% of the collateral plus  the gas compensation which is equal to 200 MUSD. We assume there will be bots observing which trove’s ICR has fallen below MCR and which will compete for the reward.

During liquidation the Stability pool pays the debt and receives the remaining collateral (99.5%).

Example:

User’s debt is 85k MUSD and user deposited 1 BTC as collateral.

BTC price is 100k USD. ICR is `100k / 85k = 1,18`, which is above MCR, liquidation does not start

BTC price drops to 90k USD. ICR is `90k / 85k = 1,06`, which is below MCR, liquidation can start

Someone calls the liquidation.

The user looses the collateral of 1 BTC. User keeps the borrowed 85k MUSD.

The liquidation caller gets `0,5% * 90000 worth of BTC + 200 MUSD = 450$ worth of BTC + 200 MUSD`. 

The stability pool looses 85000 MUSD. It gains `99,5% * $90000 worth of BTC = $89550 worth of BTC`. So in total Stability pool gained ~4550 USD in BTC. It can then sell the BTC immediately for MUSD and put the MUSD back to the pool.

## Stability pool

Users deposit MUSD into stability pools (SP)  and receive shares. They will be gaining from the liquidations of other users

Liquidations result in SP paying the MUSD debt, but SP receives 95,5% of the BTC collateral of the liquidated trove.

Example:

T1. Alice deposited 20k MUSD into SP. Alice owns 100% of the SP

T2. Bob deposits 10k MUSD into SP. Alice owns 2/3 of the SP, Bob owns 1/3 of the SP. SP has 30k MUSD and 0 BTC.

T3. Carol is liquidated for 5k MUSD and 5400 USD worth of BTC from her collateral goes to Sp. SP has now 25k MUSD and \$5400 BTC.

T4. Alice leaves LP. Her 2/3 of the SP shares give her `2/3 * (25000 MUSD + 5400$ BTC) = 16.67k MUSD + 3600$ BTC = ~$20,27k`. She profits.

If SP is empty we redistribute the debt and collateral proportionally, to all the existing troves. This means that existing troves ICRs will lower, which may trigger next liquidations, causing the domino effect and liquidating all the troves. To prevent that we introduce a MUSD / borrow mechanics which will seed the SP with initial funds (in large amount), decreasing the risk of SP having no MUSD to pay off debts.

## PCV loan

Protocol Controlled Value contract mints itself 100M MUSD on contract creation. Then deposits it into SP (which means effectively PCV owns almost all shares of the SP). It gains from other users liquidations and wit that gained value, PCV pays back the 100M MUSD debt.